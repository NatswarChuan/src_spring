<!DOCTYPE html>
<html>
<head
	th:replace="/common/head :: head_fragment(title = 'test', scripts = ~{::script}, links = ~{::link})"></head>
<body>
	<div th:if="${exception}" th:text="${exception}" class="danger"></div>
	<div th:if="${shop}" class="container" th:object="${shop}">

		<div class="card">
			<div class="card-body">
				<h4 class="card-title" th:text="*{name}"></h4>
				<p class="card-text" th:text="*{updateDate}"></p>
				<p class="card-text" th:text="*{createDate}"></p>
				<a href="/shop" class="btn btn-warning">back</a> <a
					th:href="@{/shop/update/{id} (id=*{id})}" class="btn btn-primary">update</a>
				<form action="/shop/remove" method="post">
					<input hidden="true" th:field="${removeRequest.id}"> <input
						hidden="true" th:field="${removeRequest.updateDate}">
					<button type="submit" class="btn btn-danger">remove</button>
				</form>
			</div>
		</div>

		<a th:href="@{/shop/create/product/{id} (id=*{id})}"
			class="btn btn-primary">Create product</a>
		<table class="table">
			<thead>
				<tr>
					<th scope="col">id</th>
					<th scope="col">Name</th>
					<th scope="col">Option</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="product : *{products}" th:object="${product}">
					<th scope="row" th:text="*{id}"></th>
					<td><a th:href="@{/product/{id} (id = *{id})}" th:text="*{name}"></a></td>
					<td>
						<form th:action="@{/shop/remove/product/{id} (id = ${shop.id})}" method="post">
							<input hidden="true" th:value="*{id}" name="id"> <input
								hidden="true"
								th:value="${#dates.format(product.updateDate, 'yyyy-MM-dd HH:mm:ss')}"
								name="updateDate">
							<button type="submit" class="btn btn-danger">Remove</button>
						</form>
						<a class="btn btn-warning" th:href="@{/shop/update/product/{shopId}/{productId} (shopId = ${shop.id},productId=*{id})}">Update</a>
					</td>
				</tr>
			</tbody>
		</table>
	</div>
</body>
</html>